// IMPORTANT: all paths here should be relative to this (test batch) file!
{
    "BatchName": "Function tests",
    "TestGroupList": [
        {
            "TestGroupName": "Function compilation",
            "FilePath": "./function.mj",
            "ExCompileOutput": [],
            "ExExitCode": 0,
            "TestUnitList": [
                {
                    "TestName": "Function input 1",
                    "TestInput": [],
                    "ExTestOutput": [
                        "3 2  6",
                        "",
                    ],
                    "ExExitCode": 0,
                },
            ],
        },
        {
            "TestGroupName": "Recursion-1 compilation",
            "FilePath": "./recursion-1.mj",
            "ExCompileOutput": [],
            "ExExitCode": 0,
            "TestUnitList": [
                {
                    "TestName": "Recursion-1 input 1",
                    "TestInput": [],
                    "ExTestOutput": [
                        "1 ",
                        "1 1 ",
                        "1 2 1 ",
                        "1 3 3 1 ",
                        "1 4 6 4 1 ",
                        "1 5 10 10 5 1 ",
                        "1 6 15 20 15 6 1 ",
                        "",
                    ],
                    "ExExitCode": 0,
                },
            ],
        },
        {
            "TestGroupName": "Recursion-2 compilation",
            "FilePath": "./recursion-2.mj",
            "ExCompileOutput": [],
            "ExExitCode": 0,
            "TestUnitList": [
                {
                    "TestName": "Recursion-2 input 1",
                    "TestInput": [],
                    "ExTestOutput": [
                        "1 ",
                        "1 1 ",
                        "1 2 1 ",
                        "1 3 3 1 ",
                        "1 4 6 4 1 ",
                        "1 5 10 10 5 1 ",
                        "1 6 15 20 15 6 1 ",
                        "",
                    ],
                    "ExExitCode": 0,
                },
            ],
        },
        {
            "TestGroupName": "Recursion-3 compilation",
            "FilePath": "./recursion-3.mj",
            "ExCompileOutput": [],
            "ExExitCode": 0,
            "TestUnitList": [
                {
                    "TestName": "Recursion-3 input 1",
                    "TestInput": [],
                    "ExTestOutput": [
                        " 1  2  3  4 ",
                        " 2  3  4  5 ",
                        " 3  5  7  9 ",
                        " 5 13 ",
                        "-- exception at address 98: expression stack overflow",
                        "",
                    ],
                    "ExExitCode": 0,
                },
            ],
        },
        {
            "TestGroupName": "Missing-return compilation",
            "FilePath": "./missing-return.mj",
            "ExCompileOutput": [],
            "ExExitCode": 0,
            "TestUnitList": [
                {
                    "TestName": "Missing-return input 1",
                    "TestInput": [],
                    "ExTestOutput": [
                        "",
                        "-- exception at address 31: trap(1)",
                        "",
                    ],
                    "ExExitCode": -1,
                },
            ],
        },
        {
            "TestGroupName": "Function declaration errors",
            "FilePath": "./declaration-errors.mj",
            "ExCompileOutput": [
                "declaration-errors.mj:5:9: Syntax: Bad variable name",
                "     4 | {",
                "   > 5 |     int a-;",
                "       |          ^ ",
                "     6 |     booool b;",
                "",
                "declaration-errors.mj:8:8: Syntax: Bad variable type",
                "     5 |     int a-;",
                "     6 |     booool b;",
                "     7 |     char char;",
                "   > 8 |     int void;",
                "       |         ^    ",
                "     9 | ",
                "    10 |     {",
                "    11 |         void null() {}",
                "  * 12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "       |         *                                             ",
                "    13 |         void bad( , ) {}",
                "    14 | ",
                "    15 |         int foo( int arr[], bool b, char c )",
                "",
                "declaration-errors.mj:12:16: Syntax: Bad variable name",
                "    11 |         void null() {}",
                "  > 12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "       |                 ^          *                          ",
                "    13 |         void bad( , ) {}",
                "",
                "declaration-errors.mj:12:29: Syntax: Bad variable name",
                "    11 |         void null() {}",
                "  > 12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "       |                              ^                        ",
                "    13 |         void bad( , ) {}",
                "",
                "declaration-errors.mj:12:37: Syntax: Bad variable name",
                "    11 |         void null() {}",
                "  > 12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "       |                                      ^                ",
                "    13 |         void bad( , ) {}",
                "",
                "declaration-errors.mj:12:46: Syntax: Bad variable name",
                "    11 |         void null() {}",
                "  > 12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "       |                                               ^       ",
                "    13 |         void bad( , ) {}",
                "",
                "declaration-errors.mj:12:48: Syntax: Bad variable name",
                "    11 |         void null() {}",
                "  > 12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "       |                                                 ^     ",
                "    13 |         void bad( , ) {}",
                "",
                "declaration-errors.mj:12:50: Syntax: Bad variable name",
                "    11 |         void null() {}",
                "  > 12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "       |                                                   ^   ",
                "  * 13 |         void bad( , ) {}",
                "       |                 *       ",
                "    14 | ",
                "",
                "declaration-errors.mj:13:20: Syntax: Bad variable name",
                "    12 |         void bad( intt arr[];, boolb b, chdar c,, ) {}",
                "  > 13 |         void bad( , ) {}",
                "       |                     ^   ",
                "    14 | ",
                "  * 15 |         int foo( int arr[], bool b, char c )",
                "       |                          *                  ",
                "    16 |             int i;",
                "",
                "declaration-errors.mj:15:33: Syntax: Bad variable name",
                "    14 | ",
                "  > 15 |         int foo( int arr[], bool b, char c )",
                "       |                                  ^          ",
                "    16 |             int i;",
                "",
                "declaration-errors.mj:15:41: Syntax: Bad variable name",
                "    14 | ",
                "  > 15 |         int foo( int arr[], bool b, char c )",
                "       |                                          ^  ",
                "  * 16 |             int i;",
                "       |                 * ",
                "    17 |         {",
                "",
                "declaration-errors.mj:18:14: Syntax: Bad variable type",
                "    17 |         {",
                "  > 18 |             i = this.foo( arr, b );",
                "       |               ^     *              ",
                "    19 |             i = foo( arr, b );",
                "",
                "declaration-errors.mj:18:24: Syntax: Bad variable name",
                "    17 |         {",
                "  > 18 |             i = this.foo( arr, b );",
                "       |                         ^ *        ",
                "    19 |             i = foo( arr, b );",
                "",
                "declaration-errors.mj:18:33: Syntax: Bad variable name",
                "    17 |         {",
                "  > 18 |             i = this.foo( arr, b );",
                "       |                                  ^ ",
                "    19 |             i = foo( arr, b );",
                "",
                "declaration-errors.mj:19:14: Syntax: Bad variable type",
                "    18 |             i = this.foo( arr, b );",
                "  > 19 |             i = foo( arr, b );",
                "       |               ^               ",
                "    20 |             return null;",
                "",
                "declaration-errors.mj:19:19: Syntax: Bad variable name",
                "    18 |             i = this.foo( arr, b );",
                "  > 19 |             i = foo( arr, b );",
                "       |                    ^ *        ",
                "    20 |             return null;",
                "",
                "declaration-errors.mj:19:28: Syntax: Bad variable name",
                "    18 |             i = this.foo( arr, b );",
                "  > 19 |             i = foo( arr, b );",
                "       |                             ^ ",
                "    20 |             return null;",
                "",
                "declaration-errors.mj:20:12: Syntax: Bad variable name",
                "    19 |             i = foo( arr, b );",
                "  > 20 |             return null;",
                "       |             ^      *    ",
                "    21 |         }",
                "",
                "declaration-errors.mj:22:4: Syntax: Bad variable type",
                "    19 |             i = foo( arr, b );",
                "    20 |             return null;",
                "    21 |         }",
                "  > 22 |     }",
                "       |     ^",
                "    23 | }",
                "    24 | ",
                "    25 | {",
                "  * 26 |     void foo( int arr[], bool b, char c ) { return 5; }",
                "       |     *                                                  ",
                "    27 | ",
                "    28 |     void main()",
                "    29 |         int a, arr[];",
                "",
                "declaration-errors.mj:26:12: Syntax: Bad variable name",
                "    25 | {",
                "  > 26 |     void foo( int arr[], bool b, char c ) { return 5; }",
                "       |             ^         *                                ",
                "    27 | ",
                "",
                "declaration-errors.mj:26:30: Syntax: Bad variable name",
                "    25 | {",
                "  > 26 |     void foo( int arr[], bool b, char c ) { return 5; }",
                "       |                               ^                        ",
                "    27 | ",
                "",
                "declaration-errors.mj:26:38: Syntax: Bad variable name",
                "    25 | {",
                "  > 26 |     void foo( int arr[], bool b, char c ) { return 5; }",
                "       |                                       ^            *   ",
                "    27 | ",
                "",
                "declaration-errors.mj:26:54: Syntax: Bad variable type",
                "    25 | {",
                "  > 26 |     void foo( int arr[], bool b, char c ) { return 5; }",
                "       |                                                       ^",
                "    27 | ",
                "  * 28 |     void main()",
                "       |     *          ",
                "    29 |         int a, arr[];",
                "",
                "declaration-errors.mj:28:13: Syntax: Bad variable name",
                "    27 | ",
                "  > 28 |     void main()",
                "       |              ^ ",
                "  * 29 |         int a, arr[];",
                "       |             *        ",
                "    30 |         bool b;",
                "",
                "declaration-errors.mj:34:8: Syntax: Bad variable type",
                "    33 |     {",
                "  > 34 |         return 1;",
                "       |         ^       *",
                "    35 |         c = new C;",
                "",
                "declaration-errors.mj:35:10: Syntax: Bad variable name",
                "    34 |         return 1;",
                "  > 35 |         c = new C;",
                "       |           ^     * ",
                "    36 | ",
                "",
                "declaration-errors.mj:37:11: Syntax: Bad variable type",
                "    36 | ",
                "  > 37 |         foo();",
                "       |            ^ *",
                "    38 |         foo( arr );",
                "",
                "declaration-errors.mj:38:11: Syntax: Bad variable name",
                "    37 |         foo();",
                "  > 38 |         foo( arr );",
                "       |            ^     * ",
                "    39 |         foo( arr, b, c, b );",
                "",
                "declaration-errors.mj:39:11: Syntax: Bad variable type",
                "    38 |         foo( arr );",
                "  > 39 |         foo( arr, b, c, b );",
                "       |            ^                ",
                "    40 |         foo( b, c, a );",
                "",
                "declaration-errors.mj:39:26: Syntax: Bad variable name",
                "    38 |         foo( arr );",
                "  > 39 |         foo( arr, b, c, b );",
                "       |                           ^ ",
                "    40 |         foo( b, c, a );",
                "",
                "declaration-errors.mj:40:11: Syntax: Bad variable type",
                "    39 |         foo( arr, b, c, b );",
                "  > 40 |         foo( b, c, a );",
                "       |            ^           ",
                "    41 |         foo( arr, b, c );",
                "",
                "declaration-errors.mj:40:21: Syntax: Bad variable name",
                "    39 |         foo( arr, b, c, b );",
                "  > 40 |         foo( b, c, a );",
                "       |                      ^ ",
                "    41 |         foo( arr, b, c );",
                "",
                "declaration-errors.mj:41:11: Syntax: Bad variable type",
                "    40 |         foo( b, c, a );",
                "  > 41 |         foo( arr, b, c );",
                "       |            ^             ",
                "    42 |         ",
                "",
                "declaration-errors.mj:41:23: Syntax: Bad variable name",
                "    40 |         foo( b, c, a );",
                "  > 41 |         foo( arr, b, c );",
                "       |                        ^ ",
                "    42 |         ",
                "",
                "declaration-errors.mj:43:9: Syntax: Bad variable type",
                "    42 |         ",
                "  > 43 |         c.foo();",
                "       |          ^      ",
                "    44 |         c.foo( , );",
                "",
                "declaration-errors.mj:43:13: Syntax: Bad variable name",
                "    42 |         ",
                "  > 43 |         c.foo();",
                "       |              ^* ",
                "    44 |         c.foo( , );",
                "",
                "declaration-errors.mj:44:9: Syntax: Bad variable type",
                "    43 |         c.foo();",
                "  > 44 |         c.foo( , );",
                "       |          ^         ",
                "    45 |         c.foo( asdfl kajsdf lk );",
                "",
                "declaration-errors.mj:44:13: Syntax: Bad variable name",
                "    43 |         c.foo();",
                "  > 44 |         c.foo( , );",
                "       |              ^     ",
                "    45 |         c.foo( asdfl kajsdf lk );",
                "",
                "declaration-errors.mj:44:17: Syntax: Bad variable name",
                "    43 |         c.foo();",
                "  > 44 |         c.foo( , );",
                "       |                  ^ ",
                "    45 |         c.foo( asdfl kajsdf lk );",
                "",
                "declaration-errors.mj:45:9: Syntax: Bad variable type",
                "    44 |         c.foo( , );",
                "  > 45 |         c.foo( asdfl kajsdf lk );",
                "       |          ^                       ",
                "    46 |         c.fooo();",
                "",
                "declaration-errors.mj:45:13: Syntax: Bad variable name",
                "    44 |         c.foo( , );",
                "  > 45 |         c.foo( asdfl kajsdf lk );",
                "       |              ^                 * ",
                "    46 |         c.fooo();",
                "",
                "declaration-errors.mj:46:9: Syntax: Bad variable type",
                "    45 |         c.foo( asdfl kajsdf lk );",
                "  > 46 |         c.fooo();",
                "       |          ^       ",
                "    47 |         c.foo( b, c, a );",
                "",
                "declaration-errors.mj:46:14: Syntax: Bad variable name",
                "    45 |         c.foo( asdfl kajsdf lk );",
                "  > 46 |         c.fooo();",
                "       |               ^* ",
                "    47 |         c.foo( b, c, a );",
                "",
                "declaration-errors.mj:47:9: Syntax: Bad variable type",
                "    46 |         c.fooo();",
                "  > 47 |         c.foo( b, c, a );",
                "       |          ^               ",
                "    48 |         c.foo( a, b, c );",
                "",
                "declaration-errors.mj:47:13: Syntax: Bad variable name",
                "    46 |         c.fooo();",
                "  > 47 |         c.foo( b, c, a );",
                "       |              ^ *         ",
                "    48 |         c.foo( a, b, c );",
                "",
                "declaration-errors.mj:47:23: Syntax: Bad variable name",
                "    46 |         c.fooo();",
                "  > 47 |         c.foo( b, c, a );",
                "       |                        ^ ",
                "    48 |         c.foo( a, b, c );",
                "",
                "declaration-errors.mj:48:9: Syntax: Bad variable type",
                "    47 |         c.foo( b, c, a );",
                "  > 48 |         c.foo( a, b, c );",
                "       |          ^               ",
                "    49 |         c.foo( arr, b, c );",
                "",
                "declaration-errors.mj:48:13: Syntax: Bad variable name",
                "    47 |         c.foo( b, c, a );",
                "  > 48 |         c.foo( a, b, c );",
                "       |              ^ *         ",
                "    49 |         c.foo( arr, b, c );",
                "",
                "declaration-errors.mj:48:23: Syntax: Bad variable name",
                "    47 |         c.foo( b, c, a );",
                "  > 48 |         c.foo( a, b, c );",
                "       |                        ^ ",
                "    49 |         c.foo( arr, b, c );",
                "",
                "declaration-errors.mj:49:9: Syntax: Bad variable type",
                "    48 |         c.foo( a, b, c );",
                "  > 49 |         c.foo( arr, b, c );",
                "       |          ^                 ",
                "    50 |     }",
                "",
                "declaration-errors.mj:49:13: Syntax: Bad variable name",
                "    48 |         c.foo( a, b, c );",
                "  > 49 |         c.foo( arr, b, c );",
                "       |              ^ *           ",
                "    50 |     }",
                "",
                "declaration-errors.mj:49:25: Syntax: Bad variable name",
                "    48 |         c.foo( a, b, c );",
                "  > 49 |         c.foo( arr, b, c );",
                "       |                          ^ ",
                "    50 |     }",
                "",
                "declaration-errors.mj:50:4: Syntax: Fatal error detected, parsing stopped",
                "    49 |         c.foo( arr, b, c );",
                "  > 50 |     }",
                "       |     ^",
                "    51 | }",
                "",
                "Lexical: 0   Syntax: 53  Semantic: 0  ",
                "",
            ],
            "ExExitCode": -1,
            "TestUnitList": [],
        },
        {
            "TestGroupName": "Parameter errors",
            "FilePath": "./params-errors.mj",
            "ExCompileOutput": [
                "params-errors.mj:12:16: Semantic: Less parameters given than expected in function/method call",
                "    11 |         {",
                "  > 12 |             i = this.foo( arr, b );",
                "       |                 ^                  ",
                "    13 |             i = foo( arr, b );",
                "",
                "params-errors.mj:13:16: Semantic: Less parameters given than expected in function/method call",
                "    12 |             i = this.foo( arr, b );",
                "  > 13 |             i = foo( arr, b );",
                "       |                 ^             ",
                "    14 |             return null;",
                "",
                "params-errors.mj:14:19: Semantic: Return expression is not equivalent to or a subtype of the method return type",
                "    13 |             i = foo( arr, b );",
                "  > 14 |             return null;",
                "       |                    ^    ",
                "    15 |         }",
                "",
                "params-errors.mj:20:51: Semantic: Return expression is not equivalent to or a subtype of the method return type",
                "    19 | {",
                "  > 20 |     void foo( int arr[], bool b, char c ) { return 5; }",
                "       |                                                    ^   ",
                "    21 | ",
                "",
                "params-errors.mj:27:15: Semantic: Return expression is not equivalent to or a subtype of the method return type",
                "    26 |     {",
                "  > 27 |         return 1;",
                "       |                ^ ",
                "    28 |         c = new C;",
                "",
                "params-errors.mj:30:8: Semantic: Less parameters given than expected in function/method call",
                "    29 | ",
                "  > 30 |         c.foo();",
                "       |         ^       ",
                "    31 |         c.fooo();",
                "",
                "params-errors.mj:31:8: Semantic: The specified class/record does not contain this member",
                "    30 |         c.foo();",
                "  > 31 |         c.fooo();",
                "       |         ^        ",
                "    32 |         c.foo( b, c, a );",
                "",
                "params-errors.mj:32:15: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    31 |         c.fooo();",
                "  > 32 |         c.foo( b, c, a );",
                "       |                ^         ",
                "    33 |         c.foo( a, b, c );",
                "",
                "params-errors.mj:32:18: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    31 |         c.fooo();",
                "  > 32 |         c.foo( b, c, a );",
                "       |                   ^      ",
                "    33 |         c.foo( a, b, c );",
                "",
                "params-errors.mj:32:21: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    31 |         c.fooo();",
                "  > 32 |         c.foo( b, c, a );",
                "       |                      ^   ",
                "    33 |         c.foo( a, b, c );",
                "",
                "params-errors.mj:33:15: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    32 |         c.foo( b, c, a );",
                "  > 33 |         c.foo( a, b, c );",
                "       |                ^         ",
                "    34 |         c.foo( arr, b, c );",
                "",
                "params-errors.mj:33:21: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    32 |         c.foo( b, c, a );",
                "  > 33 |         c.foo( a, b, c );",
                "       |                      ^   ",
                "    34 |         c.foo( arr, b, c );",
                "",
                "params-errors.mj:34:23: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    33 |         c.foo( a, b, c );",
                "  > 34 |         c.foo( arr, b, c );",
                "       |                        ^   ",
                "    35 |         c.foo( arr, b, c, b );",
                "",
                "params-errors.mj:35:23: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    34 |         c.foo( arr, b, c );",
                "  > 35 |         c.foo( arr, b, c, b );",
                "       |                        ^      ",
                "    36 | ",
                "",
                "params-errors.mj:35:26: Semantic: More parameters given than expected in function/method call",
                "    34 |         c.foo( arr, b, c );",
                "  > 35 |         c.foo( arr, b, c, b );",
                "       |                           ^   ",
                "    36 | ",
                "",
                "params-errors.mj:37:8: Semantic: Less parameters given than expected in function/method call",
                "    36 | ",
                "  > 37 |         foo();",
                "       |         ^     ",
                "    38 |         foo( arr );",
                "",
                "params-errors.mj:38:8: Semantic: Less parameters given than expected in function/method call",
                "    37 |         foo();",
                "  > 38 |         foo( arr );",
                "       |         ^          ",
                "    39 |         foo( arr, b, c, b );",
                "",
                "params-errors.mj:39:21: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    38 |         foo( arr );",
                "  > 39 |         foo( arr, b, c, b );",
                "       |                      ^      ",
                "    40 |         foo( b, c, a );",
                "",
                "params-errors.mj:39:24: Semantic: More parameters given than expected in function/method call",
                "    38 |         foo( arr );",
                "  > 39 |         foo( arr, b, c, b );",
                "       |                         ^   ",
                "    40 |         foo( b, c, a );",
                "",
                "params-errors.mj:40:13: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    39 |         foo( arr, b, c, b );",
                "  > 40 |         foo( b, c, a );",
                "       |              ^         ",
                "    41 |         foo( arr, b, c );",
                "",
                "params-errors.mj:40:16: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    39 |         foo( arr, b, c, b );",
                "  > 40 |         foo( b, c, a );",
                "       |                 ^      ",
                "    41 |         foo( arr, b, c );",
                "",
                "params-errors.mj:40:19: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    39 |         foo( arr, b, c, b );",
                "  > 40 |         foo( b, c, a );",
                "       |                    ^   ",
                "    41 |         foo( arr, b, c );",
                "",
                "params-errors.mj:41:21: Semantic: This expression is incompatible with the function/method's formal parameter",
                "    40 |         foo( b, c, a );",
                "  > 41 |         foo( arr, b, c );",
                "       |                      ^   ",
                "    42 |         ",
                "",
                "Lexical: 0   Syntax: 0   Semantic: 23 ",
                "",
            ],
            "ExExitCode": -1,
            "TestUnitList": [],
        },
    ]
}

